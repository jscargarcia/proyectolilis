# ===============================================
# ARCHIVO DE CONFIGURACIÓN DE ENTORNO
# Dulcería Lilis - Variables de Entorno
# ===============================================

# ==========================================
# CONFIGURACIÓN DE DJANGO
# ==========================================

# Clave secreta de Django (cambiar en producción)
SECRET_KEY=django-insecure-change-this-in-production-very-long-random-string-123456789

# Modo de depuración (True para desarrollo, False para producción)
DEBUG=True

# Hosts permitidos (separados por comas)
ALLOWED_HOSTS=localhost,127.0.0.1,0.0.0.0

# ==========================================
# CONFIGURACIÓN DE BASE DE DATOS
# ==========================================

# Tipo de motor de base de datos
DB_ENGINE=django.db.backends.mysql

# Nombre de la base de datos
DB_NAME=empresa_lilis

# Usuario de la base de datos
DB_USER=lily_user

# Contraseña de la base de datos
DB_PASSWORD=lily_password123

# Servidor de base de datos
DB_HOST=localhost

# Puerto de la base de datos
DB_PORT=3306

# Opciones adicionales de MySQL
DB_CHARSET=utf8
DB_COLLATION=utf8_general_ci

# ==========================================
# CONFIGURACIÓN DE CORREO (Requerido para cambio de contraseña)
# ==========================================

# Backend de email (producción)
EMAIL_BACKEND=django.core.mail.backends.smtp.EmailBackend

# Servidor SMTP (Gmail configurado)
EMAIL_HOST=smtp.gmail.com
EMAIL_PORT=587
EMAIL_USE_TLS=True

# Credenciales de Gmail (cambiar por las tuyas)
EMAIL_HOST_USER=tu_email@gmail.com
EMAIL_HOST_PASSWORD=tu_app_password_de_16_digitos

# Email por defecto para notificaciones
DEFAULT_FROM_EMAIL=Dulcería Lilis <tu_email@gmail.com>

# Para desarrollo local (opcional - no envía emails reales)
# EMAIL_BACKEND=django.core.mail.backends.console.EmailBackend

# ==========================================
# CONFIGURACIÓN DE SEGURIDAD
# ==========================================

# Configuración para HTTPS en producción
SECURE_SSL_REDIRECT=False
SECURE_BROWSER_XSS_FILTER=True
SECURE_CONTENT_TYPE_NOSNIFF=True
X_FRAME_OPTIONS=DENY

# ==========================================
# CONFIGURACIÓN DE ARCHIVOS ESTÁTICOS
# ==========================================

# URL base para archivos estáticos
STATIC_URL=/static/

# URL base para archivos multimedia
MEDIA_URL=/media/

# ==========================================
# CONFIGURACIÓN DE LOGS
# ==========================================

# Nivel de logging (DEBUG, INFO, WARNING, ERROR, CRITICAL)
LOG_LEVEL=INFO

# ==========================================
# CONFIGURACIÓN ESPECÍFICA DEL NEGOCIO
# ==========================================

# Nombre de la empresa
COMPANY_NAME=Dulcería Lilis

# Moneda por defecto
DEFAULT_CURRENCY=CLP

# Zona horaria
TIME_ZONE=America/Santiago

# Idioma por defecto
LANGUAGE_CODE=es-cl

# Configuración de sesiones (minutos)
SESSION_COOKIE_AGE=3600

# Configuración para subida de archivos (MB)
FILE_UPLOAD_MAX_MEMORY_SIZE=5242880
DATA_UPLOAD_MAX_MEMORY_SIZE=5242880

# ==========================================
# CONFIGURACIÓN DE DESARROLLO
# ==========================================

# Mostrar toolbar de debug (solo desarrollo)
SHOW_DEBUG_TOOLBAR=True

# Cargar datos de ejemplo automáticamente
LOAD_SAMPLE_DATA=False

# ==========================================
# NOTAS DE CONFIGURACIÓN
# ==========================================

# 1. NUNCA subir este archivo a Git con credenciales reales
# 2. Copiar este archivo como '.env' y modificar los valores
# 3. En producción, cambiar SECRET_KEY y todas las contraseñas
# 4. Para otra máquina, cambiar DB_HOST, DB_USER, DB_PASSWORD
# 5. Configurar Gmail App Password para EMAIL_HOST_PASSWORD
# 6. Instalar python-decouple: pip install python-decouple

# ==========================================
# NUEVAS FUNCIONALIDADES IMPLEMENTADAS
# ==========================================

# ✅ CRUD Completo de Categorías y Marcas (Noviembre 2025)
# ✅ Sistema de permisos por roles integrado
# ✅ Templates profesionales con validaciones
# ✅ Sistema de correos para cambio de contraseña
# ✅ Arquitectura simplificada sin AJAX problemático
# ✅ Dashboard optimizado con z-index corregido
# ✅ SweetAlert2 integrado en toda la aplicación

# ==========================================
# OPTIMIZACIONES DEL SISTEMA (9 Noviembre 2025)
# ==========================================

# ✅ ELIMINACIÓN DE GESTIÓN DE MOVIMIENTOS
# - Removida complejidad innecesaria del inventario
# - Sistema enfocado solo en visualización de stock
# - Archivos eliminados: views_movimientos.py, templates relacionados

# ✅ MEJORA EN ELIMINACIÓN DE PRODUCTOS
# - Limpieza automática de movimientos al eliminar productos
# - Comandos de gestión: limpiar_movimientos, reset_inventario
# - Sin restricciones de integridad para eliminación

# ✅ SISTEMA DE PERMISOS GRANULAR COMPLETADO
# - Decoradores @permission_required en todos los views
# - Permisos específicos para marcas y categorías
# - Templates con botones condicionados por rol
# - UX mejorada con mensajes amigables

# URLs principales:
# - /maestros/categorias/ (CRUD completo con permisos)
# - /maestros/marcas/ (CRUD completo con permisos)
# - /maestros/productos/ (CRUD optimizado + eliminación mejorada)
# - /maestros/proveedores/ (CRUD con validaciones)
# - /auth/perfil/ (Gestión de perfil personal)

# Comandos de gestión disponibles:
# - python manage.py limpiar_movimientos --producto-id X --confirmar
# - python manage.py reset_inventario --confirmar

# ==========================================
# FUNCIONALIDADES DASHBOARD ACTUALIZADAS (9 Noviembre 2025)
# ==========================================

# ✅ MÓDULOS DEL SISTEMA - NUEVAS TARJETAS
# - Tarjeta de Marcas: Diseño azul con enlace a maestros:marca_listar
# - Tarjeta de Categorías: Diseño verde con enlace a maestros:categoria_listar
# - Permisos integrados: Solo visible para usuarios con can_manage_products

# ✅ ACCIONES RÁPIDAS - NUEVAS OPCIONES
# - Sección Marcas: Listar Marcas (btn-info) + Nueva Marca (btn-outline-info)  
# - Sección Categorías: Listar Categorías (btn-success) + Nueva Categoría (btn-outline-success)
# - Accesos directos desde dashboard para gestión rápida

# ✅ SISTEMA DE EXPORTACIÓN A EXCEL
# - Exportación profesional de Marcas, Categorías, Proveedores y Usuarios
# - Biblioteca openpyxl 3.1.5 para archivos Excel con estilos
# - Headers profesionales, bordes, auto-width y formato de celdas
# - Botones "Exportar Excel" verdes en todas las listas CRUD
# - Permisos integrados: Solo usuarios autorizados pueden exportar

# URLs de exportación:
# - /maestros/marcas/export-excel/ (POST con permisos)
# - /maestros/categorias/export-excel/ (POST con permisos) 
# - /maestros/proveedores/export-excel/ (POST con permisos)
# - /auth/usuarios/export-excel/ (POST - solo admins)

# Funciones de exportación implementadas:
# - export_marcas_excel() en maestros/views.py
# - export_categorias_excel() en maestros/views.py  
# - export_proveedores_excel() en maestros/views.py
# - export_usuarios_excel() en autenticacion/views.py
